apiVersion: v1
kind: Pod
metadata:
  labels:
    app: workspace
  name: workspace
  namespace: static
spec:
  containers:
    - name: workspace
      image: tenlastic/node-chrome-lerna:latest
      command:
        - /bin/bash
        - -c
        - --
        - while true; do sleep 30; done;
      envFrom:
        - secretRef:
            name: workspace
      ports:
        - containerPort: 3000
      volumeMounts:
        - name: workspace
          mountPath: /usr/src/
      workingDir: /usr/src/
    - name: mongodb
      image: bitnami/mongodb:5.0.9
      env:
        - name: MONGODB_ADVERTISED_HOSTNAME
          value: localhost
        - name: MONGODB_REPLICA_SET_KEY
          value: "1234567890"
        - name: MONGODB_REPLICA_SET_MODE
          value: primary
        - name: MONGODB_ROOT_PASSWORD
          value: password
    - name: minio
      image: bitnami/minio:2022
      env:
        - name: MINIO_ROOT_PASSWORD
          value: minioadmin
        - name: MINIO_ROOT_USER
          value: minioadmin
    - name: nats
      image: nats:2.8.4-alpine
      args:
        - --js
    - name: redis
      image: bitnami/redis:7.0.4
      env:
        - name: REDIS_PASSWORD
          value: password
    - name: redis-sentinel
      image: bitnami/redis-sentinel:7.0.4
      env:
        - name: REDIS_MASTER_HOST
          value: localhost
        - name: REDIS_MASTER_PASSWORD
          value: password
  volumes:
    - name: workspace
      hostPath:
        path: /run/desktop/mnt/host/wsl/open-platform/
