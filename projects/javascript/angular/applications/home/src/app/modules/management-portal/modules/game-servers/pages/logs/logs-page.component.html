<div class="page">
  <app-title>Game Server Logs</app-title>

  <div class="logs-container">
    <ng-container *ngIf="($logs | async).length > 0">
      <div
        *ngFor="let log of $logs | async"
        class="log"
        [ngClass]="visibility[log._id] ? 'expanded' : 'collapsed'"
        (click)="visibility[log._id] = !visibility[log._id]"
      >
        <span class="timestamp">[{{ log.createdAt | date: 'short' }}]</span>

        <span *ngIf="getJson(log) as json">{{ json | json }}</span>
        <span *ngIf="!getJson(log)">{{ log.body }}</span>
      </div>
    </ng-container>

    <ng-container *ngIf="($logs | async).length === 0">
      <div class="log">No logs found.</div>
    </ng-container>
  </div>
</div>
