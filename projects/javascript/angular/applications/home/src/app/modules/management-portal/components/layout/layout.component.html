<app-header-toolbar>
  <img src="/assets/images/logo.png" />

  <app-button color="accent" routerLink="namespaces">
    <mat-icon>layers</mat-icon>
    <span>
      {{
        selectedNamespaceService.namespace
          ? selectedNamespaceService.namespace.name
          : 'Select Namespace'
      }}
    </span>
    <mat-icon>keyboard_arrow_down</mat-icon>
  </app-button>

  <app-button *ngIf="selectedNamespaceService.namespace" color="accent" routerLink="games">
    <mat-icon>sports_esports</mat-icon>
    <span>
      {{ selectedGameService.game ? selectedGameService.game.fullTitle : 'Select Game' }}
    </span>
    <mat-icon>keyboard_arrow_down</mat-icon>
  </app-button>

  <span class="space"></span>

  <app-button *ngIf="identityService.user" color="accent" [matMenuTriggerFor]="menu">
    <mat-icon>person</mat-icon>
    <span>{{ identityService.user.username }}</span>
    <mat-icon>keyboard_arrow_down</mat-icon>
  </app-button>
  <mat-menu #menu="matMenu" xPosition="before">
    <app-button
      *ngIf="identityService.user"
      color="accent"
      layout="vertical"
      [routerLink]="['/account']"
      text="left"
      width="full"
    >
      <mat-icon>create</mat-icon>
      <span>Manage Account</span>
    </app-button>

    <app-button
      color="accent"
      layout="vertical"
      routerLink="/authentication/log-out"
      text="left"
      width="full"
    >
      <mat-icon>exit_to_app</mat-icon>
      <span>Log out</span>
    </app-button>
  </mat-menu>

  <app-button
    *ngIf="!identityService.user"
    color="accent"
    routerLink="/authentication/log-in"
    [ngClass]="{ active: router.url.includes('/authentication') }"
  >
    <mat-icon>lock</mat-icon>
    <span>Log In</span>
  </app-button>

  <app-button *ngIf="!electronService.isElectron" color="primary" [href]="launcherUrl">
    <span>Download Launcher</span>
  </app-button>
</app-header-toolbar>

<div class="content">
  <app-social>
    <app-sidenav>
      <div class="nav">
        <app-button
          color="accent"
          layout="vertical"
          routerLink="namespaces"
          routerLinkActive="active"
          text="left"
          width="full"
        >
          <mat-icon>layers</mat-icon>
          <span>Namespaces</span>
        </app-button>

        <app-button
          color="accent"
          layout="vertical"
          routerLink="refresh-tokens"
          routerLinkActive="active"
          text="left"
          width="full"
        >
          <mat-icon>vpn_key</mat-icon>
          <span>Refresh Tokens</span>
        </app-button>

        <app-button
          color="accent"
          [hidden]="!identityService?.user?.roles?.includes('Administrator')"
          layout="vertical"
          routerLink="users"
          routerLinkActive="active"
          text="left"
          width="full"
        >
          <mat-icon>person</mat-icon>
          <span>Users</span>
        </app-button>

        <app-button
          *ngIf="selectedNamespaceService.namespace"
          color="accent"
          layout="vertical"
          text="left"
          width="full"
          (OnClick)="showNamespaceButtons = !showNamespaceButtons"
        >
          <span>Namespace</span>
          <mat-icon>
            {{ showNamespaceButtons ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}
          </mat-icon>
        </app-button>

        <ng-container *ngIf="selectedNamespaceService.namespace && showNamespaceButtons">
          <app-button
            color="accent"
            [hidden]="!selectedNamespaceService.namespaceId"
            layout="vertical"
            routerLink="databases"
            routerLinkActive="active"
            text="left"
            width="full"
          >
            <mat-icon>sd_card</mat-icon>
            <span>Databases</span>
          </app-button>

          <app-button
            color="accent"
            [hidden]="!selectedNamespaceService.namespaceId"
            layout="vertical"
            routerLink="games"
            routerLinkActive="active"
            text="left"
            width="full"
          >
            <mat-icon>sports_esports</mat-icon>
            <span>Games</span>
          </app-button>
        </ng-container>

        <app-button
          *ngIf="selectedGameService.game"
          color="accent"
          layout="vertical"
          text="left"
          width="full"
          (OnClick)="showGameButtons = !showGameButtons"
        >
          <span>Game</span>
          <mat-icon>
            {{ showGameButtons ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}
          </mat-icon>
        </app-button>

        <ng-container *ngIf="selectedGameService.game && showGameButtons">
          <app-button
            color="accent"
            [hidden]="!selectedNamespaceService.namespaceId"
            layout="vertical"
            routerLink="articles"
            routerLinkActive="active"
            text="left"
            width="full"
          >
            <mat-icon>description</mat-icon>
            <span>Articles</span>
          </app-button>

          <app-button
            color="accent"
            [hidden]="!selectedNamespaceService.namespaceId"
            layout="vertical"
            routerLink="game-invitations"
            routerLinkActive="active"
            text="left"
            width="full"
          >
            <mat-icon>person_add_alt_1</mat-icon>
            <span>Game Invitations</span>
          </app-button>

          <app-button
            color="accent"
            [hidden]="!selectedNamespaceService.namespaceId"
            layout="vertical"
            routerLink="game-servers"
            routerLinkActive="active"
            text="left"
            width="full"
          >
            <mat-icon>dns</mat-icon>
            <span>Game Servers</span>
          </app-button>

          <app-button
            color="accent"
            [hidden]="!selectedNamespaceService.namespaceId"
            layout="vertical"
            routerLink="queues"
            routerLinkActive="active"
            text="left"
            width="full"
          >
            <mat-icon>schedule</mat-icon>
            <span>Queues</span>
          </app-button>

          <app-button
            color="accent"
            [hidden]="!selectedNamespaceService.namespaceId"
            layout="vertical"
            routerLink="releases"
            routerLinkActive="active"
            text="left"
            width="full"
          >
            <mat-icon>unarchive</mat-icon>
            <span>Releases</span>
          </app-button>
        </ng-container>
      </div>

      <div class="content">
        <router-outlet></router-outlet>
      </div>
    </app-sidenav>
  </app-social>
</div>
