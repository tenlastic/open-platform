<ten-system-toolbar
  *ngIf="electronService.isElectron"
  (OnClose)="close()"
  (OnMaximize)="maximize()"
  (OnMinimize)="minimize()"
>
  {{ message }}
</ten-system-toolbar>

<ten-header-toolbar *ngIf="$activeGame | async as activeGame">
  <img src="/assets/images/logo.png" />

  <ten-button
    *ngIf="identityService.user"
    color="accent"
    [routerLink]="['/', 'games', activeGame.slug]"
    routerLinkActive="active"
    [routerLinkActiveOptions]="{ exact: true }"
  >
    <mat-icon>home</mat-icon>
    <span>Home</span>
  </ten-button>

  <ten-button
    *ngIf="electronService.isElectron && identityService.user"
    [ngClass]="{ disabled: ($isReady | async) === false }"
    color="accent"
    [disabled]="($isReady | async) === false"
    [routerLink]="['/', 'games', activeGame.slug, 'game-servers']"
    routerLinkActive="active"
  >
    <mat-icon>dns</mat-icon>
    <span>Game Servers</span>
  </ten-button>

  <span class="space"></span>

  <ten-button
    *ngIf="identityService.user"
    color="accent"
    [matMenuTriggerFor]="menu"
    [ngClass]="{
      active: router.url.includes('/account'),
      online: $getConnection(identityService.user._id) | async,
      offline: ($getConnection(identityService.user._id) | async) === undefined
    }"
  >
    <mat-icon>
      {{
        ($getConnection(identityService.user._id) | async)
          ? 'brightness_1'
          : 'radio_button_unchecked'
      }}
    </mat-icon>
    <span>{{ identityService.user.username }}</span>
    <mat-icon>keyboard_arrow_down</mat-icon>
  </ten-button>
  <mat-menu #menu="matMenu" xPosition="before">
    <ten-button
      *ngIf="identityService.user"
      color="accent"
      layout="vertical"
      [routerLink]="['/account']"
      text="left"
      width="full"
    >
      <mat-icon>create</mat-icon>
      <span>Manage Account</span>
    </ten-button>

    <ten-button
      color="accent"
      layout="vertical"
      text="left"
      width="full"
      (OnClick)="navigateToLogout()"
    >
      <mat-icon>exit_to_app</mat-icon>
      <span>Log out</span>
    </ten-button>
  </mat-menu>

  <ten-button
    *ngIf="!identityService.user"
    color="accent"
    [ngClass]="{ active: router.url.includes('/authentication') }"
    (OnClick)="navigateToLogin()"
  >
    <mat-icon>lock</mat-icon>
    <span>Log In</span>
  </ten-button>

  <ten-button *ngIf="!electronService.isElectron" color="primary" [href]="launcherUrl">
    <span>Download Launcher</span>
  </ten-button>
</ten-header-toolbar>

<div *ngIf="$activeGame | async as activeGame" class="content">
  <app-social></app-social>
</div>
