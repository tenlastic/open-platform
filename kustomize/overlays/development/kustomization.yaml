apiVersion: kustomize.config.k8s.io/v1beta1
bases:
  - ../../base/
kind: Kustomization
patches:
  - path: ./static/cronworkflows/e2e.json
    target:
      group: argoproj.io
      kind: CronWorkflow
      name: e2e
      namespace: static
      version: v1alpha1
  - path: ./static/deployments/api.json
    target:
      group: apps
      kind: Deployment
      name: api
      namespace: static
      version: v1
  - path: ./static/deployments/docker-registry.json
    target:
      group: apps
      kind: Deployment
      name: docker-registry
      namespace: static
      version: v1
  - path: ./static/deployments/documentation.json
    target:
      group: apps
      kind: Deployment
      name: documentation
      namespace: static
      version: v1
  - path: ./static/deployments/home-ui.json
    target:
      group: apps
      kind: Deployment
      name: home-ui
      namespace: static
      version: v1
  - path: ./static/deployments/social-api.json
    target:
      group: apps
      kind: Deployment
      name: social-api
      namespace: static
      version: v1
  - path: ./static/statefulsets/aggregation-api.json
    target:
      group: apps
      kind: StatefulSet
      name: aggregation-api
      namespace: static
      version: v1
  - path: ./static/statefulsets/aggregation-api-cdc.json
    target:
      group: apps
      kind: StatefulSet
      name: aggregation-api-cdc
      namespace: static
      version: v1
  - path: ./static/statefulsets/aggregation-api-connector.json
    target:
      group: apps
      kind: StatefulSet
      name: aggregation-api-connector
      namespace: static
      version: v1
  - path: ./static/statefulsets/api-cdc.json
    target:
      group: apps
      kind: StatefulSet
      name: api-cdc
      namespace: static
      version: v1
  - path: ./static/statefulsets/social-api-cdc.json
    target:
      group: apps
      kind: StatefulSet
      name: social-api-cdc
      namespace: static
      version: v1
patchesStrategicMerge:
  - ./cluster/storageclasses/balanced-expandable.yaml
  - ./cluster/storageclasses/ssd-expandable.yaml
  - ./cluster/storageclasses/standard-expandable.yaml
resources:
  - ./cluster/clusterrolebindings/docker-for-desktop-binding.yaml
  - ./dynamic/secrets/docker-registry.yaml
  - ./dynamic/secrets/nodejs.yaml
  - ./kube-system/apiservices/v1beta1.metrics.k8s.io.yaml
  - ./kube-system/clusterrolebindings/metrics-server:system:auth-delegator.yaml
  - ./kube-system/clusterrolebindings/system:metrics-server.yaml
  - ./kube-system/clusterroles/system:aggregated-metrics-reader.yaml
  - ./kube-system/clusterroles/system:metrics-server.yaml
  - ./kube-system/deployments/metrics-server.yaml
  - ./kube-system/rolebindings/metrics-server-auth-reader.yaml
  - ./kube-system/serviceaccounts/metrics-server.yaml
  - ./kube-system/services/metrics-server.yaml
  - ./static/jobs/aggregation-api-migrations.yaml
  - ./static/jobs/api-migrations.yaml
  - ./static/jobs/social-api-migrations.yaml
  - ./static/pods/workspace.yaml
  - ./static/secrets/docker-registry-image-pull-secret.yaml
  - ./static/secrets/docker-registry.yaml
  - ./static/secrets/e2e.yaml
  - ./static/secrets/minio.yaml
  - ./static/secrets/mongodb-gui.yaml
  - ./static/secrets/mongodb.yaml
  - ./static/secrets/nats.yaml
  - ./static/secrets/nodejs.yaml
  - ./static/secrets/redis.yaml
  - ./static/secrets/verdaccio.yaml
  - ./static/secrets/workspace.yaml
