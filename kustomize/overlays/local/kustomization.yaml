apiVersion: kustomize.config.k8s.io/v1beta1
bases:
  - ../../base/
images:
  - name: tenlastic/api
    newName: tenlastic/api
    newTag: latest
  - name: tenlastic/home-ui
    newName: tenlastic/home-ui
    newTag: latest
kind: Kustomization
patches:
  - path: ./static/docker-registry/docker-registry.json
    target:
      group: apps
      kind: Deployment
      name: docker-registry
      namespace: static
      version: v1
  - path: ./static/ingress-nginx/basic-authentication.ingress.json
    target:
      group: networking.k8s.io
      kind: Ingress
      name: basic-authentication
      namespace: static
      version: v1
  - path: ./static/ingress-nginx/default.ingress.json
    target:
      group: networking.k8s.io
      kind: Ingress
      name: default
      namespace: static
      version: v1
patchesStrategicMerge:
  - ./cluster/storage-classes/balanced-expandable.yaml
  - ./cluster/storage-classes/ssd-expandable.yaml
  - ./cluster/storage-classes/standard-expandable.yaml
resources:
  - ./cluster/cluster-role-bindings/docker-for-desktop-binding.yaml
  - ./dynamic/secrets/docker-registry.secret.example.yaml
  - ./dynamic/secrets/nodejs.secret.example.yaml
  - ./kube-system/metrics-server/metrics-server.yaml
  - ./static/docker-registry/docker-registry-image-pull-secret.secret.example.yaml
  - ./static/docker-registry/docker-registry.secret.example.yaml
  - ./static/minio/minio.secret.example.yaml
  - ./static/mongodb/mongodb.secret.example.yaml
  - ./static/mongodb/mongodb-gui.secret.example.yaml
  - ./static/nats/nats.secret.example.yaml
  - ./static/nodejs/aggregation-api-migrations.yaml
  - ./static/nodejs/api-migrations.yaml
  - ./static/nodejs/e2e.secret.example.yaml
  - ./static/nodejs/nodejs.secret.example.yaml
  - ./static/nodejs/social-api-migrations.yaml
  - ./static/redis/redis.secret.example.yaml
  - ./static/verdaccio/verdaccio.secret.example.yaml
